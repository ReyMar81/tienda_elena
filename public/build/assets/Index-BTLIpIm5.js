import{h as T,g as v,w as y,b as t,n as r,e as g,c as o,f as c,o as n,F as b,m as x,t as a,a as V,u as k,i as _,N as w}from"./app-9HEqLJnm.js";import{_ as A}from"./AppLayout-DD1QV7aw.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const B={class:"container py-4"},F={class:"d-flex gap-3 mb-4"},L={class:"btn-group",role:"group"},S={class:"card"},D={class:"card-body"},E={class:"table-responsive"},M={class:"table table-hover align-middle"},P={key:0},H={key:0},O={key:0},z={class:"text-end"},$={class:"text-primary"},j={class:"text-center"},G={key:0,class:"badge bg-warning text-dark"},I={key:1,class:"badge bg-success"},q={class:"text-center"},J={class:"btn-group btn-group-sm"},K={key:0,class:"mt-4"},Q={class:"pagination justify-content-center"},R=["innerHTML"],Y={__name:"Index",props:{ventas:Object,filtro_origen:String},setup(i){const h=i,d=T(()=>h.filtro_origen||"tienda"),p=l=>{w.get(route("ventas.index"),{origen:l},{preserveState:!1,preserveScroll:!1})},N=l=>new Date(l).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),C=l=>({pendiente:"badge bg-warning",pagado:"badge bg-success",enviado:"badge bg-info",anulado:"badge bg-danger"})[l]||"badge bg-secondary";return(l,e)=>(n(),v(A,{title:"Ventas"},{default:y(()=>[t("div",B,[e[15]||(e[15]=t("div",{class:"row mb-4"},[t("div",{class:"col-lg-8"},[t("h2",{class:"mb-0"},"Gestión de Ventas"),t("p",{class:"text-muted"}," Visualiza el historial de ventas realizadas ")]),t("div",{class:"col-lg-4 text-end"})],-1)),t("div",F,[t("div",L,[t("button",{class:r(["btn btn-outline-primary",{active:d.value==="tienda"}]),onClick:e[0]||(e[0]=s=>p("tienda"))},[...e[2]||(e[2]=[t("i",{class:"bi bi-shop me-1"},null,-1),g(" Tienda ",-1)])],2),t("button",{class:r(["btn btn-outline-success",{active:d.value==="online"}]),onClick:e[1]||(e[1]=s=>p("online"))},[...e[3]||(e[3]=[t("i",{class:"bi bi-globe2 me-1"},null,-1),g(" Online ",-1)])],2)])]),t("div",S,[t("div",D,[t("div",E,[t("table",M,[t("thead",null,[t("tr",null,[e[4]||(e[4]=t("th",null,"Número",-1)),e[5]||(e[5]=t("th",null,"Fecha",-1)),e[6]||(e[6]=t("th",null,"Cliente",-1)),e[7]||(e[7]=t("th",null,"Método Pago",-1)),e[8]||(e[8]=t("th",null,"Tipo de Pago",-1)),d.value==="online"?(n(),o("th",P,"Dirección de Entrega")):c("",!0),e[9]||(e[9]=t("th",{class:"text-end"},"Total",-1)),e[10]||(e[10]=t("th",{class:"text-center"},"Estado",-1)),e[11]||(e[11]=t("th",{class:"text-center"},"Acciones",-1))])]),t("tbody",null,[i.ventas.data.length===0?(n(),o("tr",H,[...e[12]||(e[12]=[t("td",{colspan:"8",class:"text-center text-muted py-4"},[t("i",{class:"bi bi-inbox fs-1 d-block mb-2"}),g(" No se encontraron ventas ")],-1)])])):c("",!0),(n(!0),o(b,null,x(i.ventas.data.filter(s=>d.value==="tienda"?s.estado==="pagado":s.estado==="enviado"),s=>{var u,m,f;return n(),o("tr",{key:s.id},[t("td",null,[t("strong",null,"#"+a(s.id),1)]),t("td",null,a(N(s.created_at)),1),t("td",null,a(((u=s.user)==null?void 0:u.nombre)||"N/A"),1),t("td",null,[e[13]||(e[13]=t("i",{class:"bi bi-credit-card me-1"},null,-1)),g(" "+a(((m=s.metodo_pago)==null?void 0:m.nombre)||((f=s.metodoPago)==null?void 0:f.nombre)||"N/A"),1)]),t("td",null,[t("span",{class:r(s.tipo_pago==="credito"?"badge bg-info":"badge bg-success")},a(s.tipo_pago==="credito"?"A Crédito":"Al Contado"),3)]),d.value==="online"?(n(),o("td",O,a(s.direccion_entrega||"N/A"),1)):c("",!0),t("td",z,[t("strong",$,"Bs. "+a(parseFloat(s.total||0).toFixed(2)),1)]),t("td",j,[d.value==="tienda"&&s.estado==="pagado"&&s.tipo_pago==="credito"?(n(),o(b,{key:0},[s.cuotas_pendientes>0?(n(),o("span",G," Pagos en proceso ")):(n(),o("span",I," Pagado "))],64)):(n(),o("span",{key:1,class:r(C(s.estado))},a(s.estado),3))]),t("td",q,[t("div",J,[V(k(_),{href:l.route("ventas.show",s.id),class:"btn btn-outline-info",title:"Ver detalles"},{default:y(()=>[...e[14]||(e[14]=[t("i",{class:"bi bi-eye"},null,-1)])]),_:1},8,["href"])])])])}),128))])])]),i.ventas.links&&i.ventas.links.length>3?(n(),o("div",K,[t("nav",null,[t("ul",Q,[(n(!0),o(b,null,x(i.ventas.links,(s,u)=>(n(),o("li",{key:u,class:r(["page-item",{active:s.active,disabled:!s.url}])},[s.url?(n(),v(k(_),{key:0,href:s.url,class:"page-link",innerHTML:s.label,"preserve-state":""},null,8,["href","innerHTML"])):(n(),o("span",{key:1,class:"page-link",innerHTML:s.label},null,8,R))],2))),128))])])])):c("",!0)])])])]),_:1}))}};export{Y as default};
