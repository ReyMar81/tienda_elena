import{_ as D}from"./AppLayout-ChHXXbMF.js";import{h as w,g as M,w as p,b as e,c as u,f as C,o as d,e as c,t as a,F as k,m as x,n as v,a as P,u as f,i as _}from"./app-DTocK5dB.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const E={class:"container py-4"},L={key:0,class:"card mb-4 border-warning"},j={class:"card-body"},z={class:"alert alert-warning mb-3"},A={class:"table-responsive"},O={class:"table table-sm"},T={class:"text-danger"},$={class:"card"},H={class:"card-body"},I={key:0},W={class:"table-responsive"},q={class:"table table-hover"},G={class:"badge bg-info"},J={class:"text-muted"},K={key:0,class:"mt-3"},Q={class:"pagination justify-content-center"},R={key:1,class:"page-link"},U={key:1,class:"alert alert-info"},ee={__name:"Index",props:{pagos:Object,cuotasPendientes:Array},setup(n){const y=n,m=i=>parseFloat(i||0).toFixed(2),N=i=>`bg-${{pendiente:"warning",vencida:"danger",pagada:"success"}[i]||"secondary"}`,S=w(()=>y.cuotasPendientes.reduce((i,s)=>{var l;const t=((l=s.pagos)==null?void 0:l.reduce((o,r)=>o+parseFloat(r.monto),0))||0;return i+(parseFloat(s.monto)-t)},0)),V=w(()=>{const i=y.pagos.current_page,s=y.pagos.last_page,t=2,l=[],o=[];for(let r=Math.max(2,i-t);r<=Math.min(s-1,i+t);r++)l.push(r);return i-t>2?o.push(1,"..."):o.push(1),o.push(...l),i+t<s-1?o.push("...",s):s>1&&o.push(s),o});return(i,s)=>(d(),M(D,{title:"Mis Pagos"},{default:p(()=>[e("div",E,[s[8]||(s[8]=e("h2",{class:"mb-4"},"Mis Pagos",-1)),n.cuotasPendientes.length>0?(d(),u("div",L,[s[2]||(s[2]=e("div",{class:"card-header bg-warning text-dark"},[e("h5",{class:"mb-0"},[e("i",{class:"bi bi-exclamation-triangle-fill"}),c(" Cuotas Pendientes ")])],-1)),e("div",j,[e("div",z,[s[0]||(s[0]=e("strong",null,"Total Pendiente:",-1)),c(" Bs. "+a(m(S.value)),1)]),e("div",A,[e("table",O,[s[1]||(s[1]=e("thead",null,[e("tr",null,[e("th",null,"N° Cuota"),e("th",null,"Venta"),e("th",null,"Fecha Vencimiento"),e("th",null,"Monto"),e("th",null,"Pagado"),e("th",null,"Saldo"),e("th",null,"Estado")])],-1)),e("tbody",null,[(d(!0),u(k,null,x(n.cuotasPendientes,t=>{var l,o,r,b;return d(),u("tr",{key:t.id},[e("td",null,a(t.numero_cuota),1),e("td",null," #"+a((o=(l=t.credito)==null?void 0:l.venta)==null?void 0:o.numero_venta),1),e("td",null,a(new Date(t.fecha_vencimiento).toLocaleDateString("es-ES")),1),e("td",null,"Bs. "+a(m(t.monto)),1),e("td",null," Bs. "+a(m(((r=t.pagos)==null?void 0:r.reduce((g,h)=>g+parseFloat(h.monto),0))||0)),1),e("td",null,[e("strong",T," Bs. "+a(m(parseFloat(t.monto)-(((b=t.pagos)==null?void 0:b.reduce((g,h)=>g+parseFloat(h.monto),0))||0))),1)]),e("td",null,[e("span",{class:v(["badge",N(t.estado)])},a(t.estado),3)])])}),128))])])])])])):C("",!0),e("div",$,[s[7]||(s[7]=e("div",{class:"card-header"},[e("h5",{class:"mb-0"},"Historial de Pagos")],-1)),e("div",H,[n.pagos.data.length>0?(d(),u("div",I,[e("div",W,[e("table",q,[s[3]||(s[3]=e("thead",null,[e("tr",null,[e("th",null,"Fecha"),e("th",null,"N° Cuota"),e("th",null,"Venta"),e("th",null,"Método de Pago"),e("th",null,"Monto"),e("th",null,"Observaciones")])],-1)),e("tbody",null,[(d(!0),u(k,null,x(n.pagos.data,t=>{var l,o,r,b,g;return d(),u("tr",{key:t.id},[e("td",null,a(new Date(t.fecha).toLocaleDateString("es-ES",{day:"2-digit",month:"short",year:"numeric"})),1),e("td",null,a((l=t.cuota)==null?void 0:l.numero_cuota),1),e("td",null,[P(f(_),{href:i.route("mis-pedidos.show",(b=(r=(o=t.cuota)==null?void 0:o.credito)==null?void 0:r.venta)==null?void 0:b.id),class:"text-decoration-none"},{default:p(()=>{var h,F,B;return[c(" #"+a((B=(F=(h=t.cuota)==null?void 0:h.credito)==null?void 0:F.venta)==null?void 0:B.numero_venta),1)]}),_:2},1032,["href"])]),e("td",null,[e("span",G,a(((g=t.metodo_pago)==null?void 0:g.nombre)||"Efectivo"),1)]),e("td",null,[e("strong",null,"Bs. "+a(m(t.monto)),1)]),e("td",null,[e("small",J,a(t.observaciones||"-"),1)])])}),128))])])]),n.pagos.last_page>1?(d(),u("nav",K,[e("ul",Q,[e("li",{class:v(["page-item",{disabled:!n.pagos.prev_page_url}])},[P(f(_),{class:"page-link",href:n.pagos.prev_page_url||"#",disabled:!n.pagos.prev_page_url},{default:p(()=>[...s[4]||(s[4]=[c(" Anterior ",-1)])]),_:1},8,["href","disabled"])],2),(d(!0),u(k,null,x(V.value,t=>{var l;return d(),u("li",{key:t,class:v(["page-item",{active:t===n.pagos.current_page,disabled:t==="..."}])},[t!=="..."?(d(),M(f(_),{key:0,class:"page-link",href:((l=n.pagos.links[t])==null?void 0:l.url)||"#"},{default:p(()=>[c(a(t),1)]),_:2},1032,["href"])):(d(),u("span",R,"..."))],2)}),128)),e("li",{class:v(["page-item",{disabled:!n.pagos.next_page_url}])},[P(f(_),{class:"page-link",href:n.pagos.next_page_url||"#",disabled:!n.pagos.next_page_url},{default:p(()=>[...s[5]||(s[5]=[c(" Siguiente ",-1)])]),_:1},8,["href","disabled"])],2)])])):C("",!0)])):(d(),u("div",U,[...s[6]||(s[6]=[e("i",{class:"bi bi-info-circle"},null,-1),c(" No has realizado ningún pago todavía. ",-1)])]))])])])]),_:1}))}};export{ee as default};
