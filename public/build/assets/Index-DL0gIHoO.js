import{r as V,g as w,w as u,a as r,b as s,u as c,Z as A,e as v,i as b,t as l,d as B,j as f,p as F,c as n,o as a,F as h,m as p,q as k,f as C,n as g,N as _}from"./app-9HEqLJnm.js";import{_ as I}from"./AppLayout-DD1QV7aw.js";import{F as D}from"./FlashNotification-r1BZxJy9.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const L={class:"container py-4"},j={class:"row mb-4"},H={class:"col-auto"},O={class:"row mb-4"},R={class:"col-md-4"},$={class:"card border-0 shadow-sm"},G={class:"card-body"},q={class:"d-flex align-items-center"},z={class:"flex-grow-1 ms-3"},Z={class:"mb-0"},J={class:"col-md-4"},K={class:"card border-0 shadow-sm"},P={class:"card-body"},Q={class:"d-flex align-items-center"},W={class:"flex-grow-1 ms-3"},X={class:"mb-0"},Y={class:"col-md-4"},ss={class:"card border-0 shadow-sm"},ts={class:"card-body"},es={class:"d-flex align-items-center"},ls={class:"flex-grow-1 ms-3"},os={class:"mb-0"},is={class:"card shadow-sm mb-4"},as={class:"card-body"},ns={class:"row g-3"},ds={class:"col-md-4"},rs={class:"col-md-3"},cs=["value"],us={class:"col-md-3"},bs={class:"card shadow-sm"},ms={class:"card-body"},vs={class:"table-responsive"},fs={class:"table table-hover align-middle"},hs={key:0},ps={class:"d-flex align-items-center"},gs=["src","alt"],_s={class:"badge bg-info"},ys={class:"text-end"},xs={class:"btn-group",role:"group"},ws=["onClick","title"],ks=["onClick"],Cs={key:0,class:"d-flex justify-content-between align-items-center mt-3"},Es={class:"text-muted"},Ns={class:"pagination mb-0"},Ts=["innerHTML"],As={__name:"Index",props:{usuarios:Object,roles:Array,filters:Object,estadisticas:Object},setup(o){const m=o,d=V({buscar:m.filters.buscar||"",role_id:m.filters.role_id||"",estado:m.filters.estado||""}),y=()=>{_.get(route("usuarios.index"),d.value,{preserveState:!0,preserveScroll:!0})},E=()=>{d.value={buscar:"",role_id:"",estado:""},y()},N=i=>{confirm("¿Estás seguro de eliminar este usuario? Esta acción no se puede deshacer.")&&_.delete(route("usuarios.destroy",i),{preserveScroll:!0})},T=i=>{_.post(route("usuarios.toggle-estado",i),{},{preserveScroll:!0})},S=i=>i?"bg-success":"bg-secondary",U=i=>i?"Activo":"Inactivo";return(i,t)=>(a(),w(I,{title:"Gestión de Usuarios"},{default:u(()=>[r(c(A),{title:"Usuarios"}),s("div",L,[r(D),s("div",j,[t[4]||(t[4]=s("div",{class:"col"},[s("h2",{class:"mb-0"},[s("i",{class:"bi bi-people me-2"}),v(" Gestión de Usuarios ")]),s("p",{class:"text-muted"}," Administra los usuarios del sistema ")],-1)),s("div",H,[r(c(b),{href:i.route("usuarios.create"),class:"btn btn-primary"},{default:u(()=>[...t[3]||(t[3]=[s("i",{class:"bi bi-plus-circle me-1"},null,-1),v(" Nuevo Usuario ",-1)])]),_:1},8,["href"])])]),s("div",O,[s("div",R,[s("div",$,[s("div",G,[s("div",q,[t[6]||(t[6]=s("div",{class:"flex-shrink-0"},[s("div",{class:"bg-primary bg-opacity-10 text-primary p-3 rounded"},[s("i",{class:"bi bi-people fs-3"})])],-1)),s("div",z,[t[5]||(t[5]=s("h6",{class:"text-muted mb-1"}," Total Usuarios ",-1)),s("h3",Z,l(o.estadisticas.total),1)])])])])]),s("div",J,[s("div",K,[s("div",P,[s("div",Q,[t[8]||(t[8]=s("div",{class:"flex-shrink-0"},[s("div",{class:"bg-success bg-opacity-10 text-success p-3 rounded"},[s("i",{class:"bi bi-person-check fs-3"})])],-1)),s("div",W,[t[7]||(t[7]=s("h6",{class:"text-muted mb-1"},"Activos",-1)),s("h3",X,l(o.estadisticas.activos),1)])])])])]),s("div",Y,[s("div",ss,[s("div",ts,[s("div",es,[t[10]||(t[10]=s("div",{class:"flex-shrink-0"},[s("div",{class:"bg-secondary bg-opacity-10 text-secondary p-3 rounded"},[s("i",{class:"bi bi-person-x fs-3"})])],-1)),s("div",ls,[t[9]||(t[9]=s("h6",{class:"text-muted mb-1"},"Inactivos",-1)),s("h3",os,l(o.estadisticas.inactivos),1)])])])])])]),s("div",is,[s("div",as,[s("form",{onSubmit:B(y,["prevent"])},[s("div",ns,[s("div",ds,[t[11]||(t[11]=s("label",{class:"form-label"},"Buscar",-1)),f(s("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>d.value.buscar=e),class:"form-control",placeholder:"Nombre, CI, Email..."},null,512),[[F,d.value.buscar]])]),s("div",rs,[t[13]||(t[13]=s("label",{class:"form-label"},"Rol",-1)),f(s("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>d.value.role_id=e),class:"form-select"},[t[12]||(t[12]=s("option",{value:""},"Todos los roles",-1)),(a(!0),n(h,null,p(o.roles,e=>(a(),n("option",{key:e.id,value:e.id},l(e.nombre),9,cs))),128))],512),[[k,d.value.role_id]])]),s("div",us,[t[15]||(t[15]=s("label",{class:"form-label"},"Estado",-1)),f(s("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>d.value.estado=e),class:"form-select"},[...t[14]||(t[14]=[s("option",{value:""},"Todos",-1),s("option",{value:"activo"},"Activos",-1),s("option",{value:"inactivo"},"Inactivos",-1)])],512),[[k,d.value.estado]])]),s("div",{class:"col-md-2 d-flex align-items-end"},[t[17]||(t[17]=s("button",{type:"submit",class:"btn btn-primary w-100 me-2"},[s("i",{class:"bi bi-search"})],-1)),s("button",{type:"button",onClick:E,class:"btn btn-outline-secondary w-100"},[...t[16]||(t[16]=[s("i",{class:"bi bi-x-circle"},null,-1)])])])])],32)])]),s("div",bs,[s("div",ms,[s("div",vs,[s("table",fs,[t[22]||(t[22]=s("thead",{class:"table-light"},[s("tr",null,[s("th",null,"ID"),s("th",null,"Nombre Completo"),s("th",null,"CI"),s("th",null,"Email"),s("th",null,"Teléfono"),s("th",null,"Rol"),s("th",null,"Estado"),s("th",null,"Fecha Registro"),s("th",{class:"text-end"},"Acciones")])],-1)),s("tbody",null,[o.usuarios.data.length===0?(a(),n("tr",hs,[...t[18]||(t[18]=[s("td",{colspan:"9",class:"text-center text-muted py-4"},[s("i",{class:"bi bi-inbox fs-1 d-block mb-2"}),v(" No se encontraron usuarios ")],-1)])])):C("",!0),(a(!0),n(h,null,p(o.usuarios.data,e=>{var x;return a(),n("tr",{key:e.id},[s("td",null,l(e.id),1),s("td",null,[s("div",ps,[s("img",{src:e.profile_photo_url,alt:e.name,class:"rounded-circle me-2",width:"32",height:"32"},null,8,gs),s("strong",null,l(e.name),1)])]),s("td",null,l(e.ci),1),s("td",null,l(e.email),1),s("td",null,l(e.telefono),1),s("td",null,[s("span",_s,l(((x=e.role)==null?void 0:x.nombre)||"Sin rol"),1)]),s("td",null,[s("span",{class:g(["badge",S(e.estado)])},l(U(e.estado)),3)]),s("td",null,l(new Date(e.created_at).toLocaleDateString("es-BO")),1),s("td",ys,[s("div",xs,[r(c(b),{href:i.route("usuarios.show",e.id),class:"btn btn-sm btn-outline-info",title:"Ver detalles"},{default:u(()=>[...t[19]||(t[19]=[s("i",{class:"bi bi-eye"},null,-1)])]),_:1},8,["href"]),r(c(b),{href:i.route("usuarios.edit",e.id),class:"btn btn-sm btn-outline-primary",title:"Editar"},{default:u(()=>[...t[20]||(t[20]=[s("i",{class:"bi bi-pencil"},null,-1)])]),_:1},8,["href"]),s("button",{onClick:M=>T(e.id),class:"btn btn-sm btn-outline-warning",title:e.estado?"Desactivar":"Activar"},[s("i",{class:g(e.estado?"bi bi-pause-circle":"bi bi-play-circle")},null,2)],8,ws),s("button",{onClick:M=>N(e.id),class:"btn btn-sm btn-outline-danger",title:"Eliminar"},[...t[21]||(t[21]=[s("i",{class:"bi bi-trash"},null,-1)])],8,ks)])])])}),128))])])]),o.usuarios.data.length>0?(a(),n("div",Cs,[s("div",Es," Mostrando "+l(o.usuarios.from)+" a "+l(o.usuarios.to)+" de "+l(o.usuarios.total)+" usuarios ",1),s("nav",null,[s("ul",Ns,[(a(!0),n(h,null,p(o.usuarios.links,e=>(a(),n("li",{key:e.label,class:g(["page-item",{active:e.active,disabled:!e.url}])},[e.url?(a(),w(c(b),{key:0,href:e.url,class:"page-link",innerHTML:e.label,"preserve-state":""},null,8,["href","innerHTML"])):(a(),n("span",{key:1,class:"page-link",innerHTML:e.label},null,8,Ts))],2))),128))])])])):C("",!0)])])])]),_:1}))}};export{As as default};
