import{_ as h}from"./AppLayout-DD1QV7aw.js";import{h as k,g as C,w as P,b as t,c as i,f as c,t as n,e as d,o as a,n as m,F as x,m as p}from"./app-9HEqLJnm.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const D={class:"container py-4"},F={class:"row justify-content-center"},T={class:"col-lg-10"},B={class:"d-flex justify-content-between align-items-center mb-4"},V={class:"text-muted mb-0"},j={class:"card mb-4"},A={class:"card-body"},E={class:"row"},I={class:"col-md-6"},M={key:0},S={class:"col-md-6"},N={key:0},L={class:"badge bg-primary"},O={class:"card mb-4"},U={class:"card-body"},q={class:"table-responsive"},z={class:"table table-striped"},G={class:"text-center"},R={class:"text-end"},_={class:"text-center"},$={key:0,class:"badge bg-danger"},Q={key:1},H={class:"text-end"},J={key:0,class:"card mb-4"},K={class:"card-body"},W={class:"row mb-3"},X={class:"col-md-3"},Y={class:"col-md-3"},Z={class:"col-md-3"},tt={class:"text-success"},st={class:"col-md-3"},nt={class:"text-danger"},et={class:"table-responsive"},ot={class:"table table-sm table-striped"},lt={class:"text-success"},dt={class:"text-danger"},at={class:"row"},it={class:"col-md-6"},rt={class:"card"},ut={class:"card-body text-center"},ct={style:{"word-wrap":"break-word","font-size":"11px"}},mt={class:"col-md-6"},bt={class:"card"},vt={class:"card-body"},gt={class:"d-flex justify-content-between mb-2"},xt={class:"d-flex justify-content-between mb-2"},pt={class:"text-danger"},yt={class:"d-flex justify-content-between"},ft={class:"fs-4 text-primary"},Ct={__name:"Show",props:{venta:Object,qrData:Object},setup(e){const u=e,l=r=>`Bs. ${parseFloat(r).toFixed(2)}`,b=r=>new Date(r).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),y=k(()=>({completada:"bg-success",pendiente:"bg-warning",anulado:"bg-danger"})[u.venta.estado]||"bg-secondary"),f=()=>{window.open(route("invoices.pdf",u.venta.id),"_blank")},w=()=>{window.open(route("invoices.ticket",u.venta.id),"_blank")};return(r,s)=>(a(),C(h,{title:"Boleta de Venta"},{default:P(()=>{var v,g;return[t("div",D,[t("div",F,[t("div",T,[t("div",B,[t("div",null,[s[0]||(s[0]=t("h2",null,"Boleta de Venta",-1)),t("p",V,n(e.venta.numero_venta),1)]),t("div",null,[t("button",{onClick:f,class:"btn btn-primary me-2"},[...s[1]||(s[1]=[t("i",{class:"bi bi-file-pdf"},null,-1),d(" Descargar PDF (A4) ",-1)])]),t("button",{onClick:w,class:"btn btn-outline-primary"},[...s[2]||(s[2]=[t("i",{class:"bi bi-receipt"},null,-1),d(" Imprimir Ticket (A6) ",-1)])])])]),t("div",j,[s[11]||(s[11]=t("div",{class:"card-header bg-primary text-white"},[t("h5",{class:"mb-0"},"Información General")],-1)),t("div",A,[t("div",E,[t("div",I,[t("p",null,[s[3]||(s[3]=t("strong",null,"Cliente:",-1)),d(" "+n(e.venta.user.name),1)]),t("p",null,[s[4]||(s[4]=t("strong",null,"Email:",-1)),d(" "+n(e.venta.user.email),1)]),e.venta.user.ci?(a(),i("p",M,[s[5]||(s[5]=t("strong",null,"CI/NIT:",-1)),d(" "+n(e.venta.user.ci),1)])):c("",!0)]),t("div",S,[t("p",null,[s[6]||(s[6]=t("strong",null,"Fecha:",-1)),d(" "+n(b(e.venta.created_at)),1)]),e.venta.vendedor?(a(),i("p",N,[s[7]||(s[7]=t("strong",null,"Vendedor:",-1)),d(" "+n(e.venta.vendedor.nombre)+" "+n(e.venta.vendedor.apellidos),1)])):c("",!0),t("p",null,[s[8]||(s[8]=t("strong",null,"Tipo de Pago:",-1)),t("span",{class:m(e.venta.tipo_pago==="credito"?"badge bg-warning":"badge bg-success")},n(e.venta.tipo_pago==="credito"?"A Crédito":"Al Contado"),3)]),t("p",null,[s[9]||(s[9]=t("strong",null,"Método de pago:",-1)),t("span",L,n(((v=e.venta.metodoPago)==null?void 0:v.nombre)||((g=e.venta.metodo_pago)==null?void 0:g.nombre)||e.venta.metodo_pago||"N/A"),1)]),t("p",null,[s[10]||(s[10]=t("strong",null,"Estado:",-1)),t("span",{class:m(["badge",y.value])},n(e.venta.estado),3)])])])])]),t("div",O,[s[13]||(s[13]=t("div",{class:"card-header"},[t("h5",{class:"mb-0"},"Detalle de Productos")],-1)),t("div",U,[t("div",q,[t("table",z,[s[12]||(s[12]=t("thead",null,[t("tr",null,[t("th",null,"Producto"),t("th",null,"Código"),t("th",{class:"text-center"}," Cantidad "),t("th",{class:"text-end"}," P. Unitario "),t("th",{class:"text-center"},"Desc."),t("th",{class:"text-end"},"Subtotal")])],-1)),t("tbody",null,[(a(!0),i(x,null,p(e.venta.detalles,o=>(a(),i("tr",{key:o.id},[t("td",null,n(o.producto.nombre),1),t("td",null,n(o.producto.codigo),1),t("td",G,n(o.cantidad),1),t("td",R,n(l(o.precio_unitario)),1),t("td",_,[o.descuento>0?(a(),i("span",$," -"+n(l(o.descuento)),1)):(a(),i("span",Q,"-"))]),t("td",H,n(l(o.subtotal)),1)]))),128))])])])])]),e.venta.tipo_pago==="credito"&&e.venta.credito?(a(),i("div",J,[s[24]||(s[24]=t("div",{class:"card-header bg-warning text-dark"},[t("h5",{class:"mb-0"},[t("i",{class:"bi bi-credit-card me-2"}),d(" Información del Crédito ")])],-1)),t("div",K,[t("div",W,[t("div",X,[t("p",null,[s[14]||(s[14]=t("strong",null,"Monto Total:",-1)),s[15]||(s[15]=t("br",null,null,-1)),d(" "+n(l(e.venta.credito.monto_credito)),1)])]),t("div",Y,[t("p",null,[s[16]||(s[16]=t("strong",null,"Total Cuotas:",-1)),s[17]||(s[17]=t("br",null,null,-1)),d(" "+n(e.venta.credito.cuotas_total)+" cuotas ",1)])]),t("div",Z,[t("p",null,[s[18]||(s[18]=t("strong",null,"Monto Pagado:",-1)),s[19]||(s[19]=t("br",null,null,-1)),t("span",tt,n(l(e.venta.credito.monto_pagado)),1)])]),t("div",st,[t("p",null,[s[20]||(s[20]=t("strong",null,"Monto Pendiente:",-1)),s[21]||(s[21]=t("br",null,null,-1)),t("span",nt,n(l(e.venta.credito.monto_pendiente)),1)])])]),s[23]||(s[23]=t("h6",{class:"mb-3"},"Plan de Cuotas:",-1)),t("div",et,[t("table",ot,[s[22]||(s[22]=t("thead",{class:"table-light"},[t("tr",null,[t("th",null,"#"),t("th",null,"Monto"),t("th",null,"Fecha Vencimiento"),t("th",null,"Estado"),t("th",null,"Monto Pagado"),t("th",null,"Pendiente")])],-1)),t("tbody",null,[(a(!0),i(x,null,p(e.venta.credito.cuotas,o=>(a(),i("tr",{key:o.id},[t("td",null," Cuota "+n(o.numero_cuota),1),t("td",null,n(l(o.monto)),1),t("td",null,n(b(o.fecha_vencimiento)),1),t("td",null,[t("span",{class:m(o.estado==="pagada"?"badge bg-success":o.estado==="vencida"?"badge bg-danger":"badge bg-warning")},n(o.estado),3)]),t("td",null,[t("span",lt,n(l(o.monto_pagado)),1)]),t("td",null,[t("span",dt,n(l(o.monto_pendiente)),1)])]))),128))])])])])])):c("",!0),t("div",at,[t("div",it,[t("div",rt,[s[27]||(s[27]=t("div",{class:"card-header"},[t("h6",{class:"mb-0"},"Código de Verificación")],-1)),t("div",ut,[s[25]||(s[25]=t("p",{class:"small text-muted mb-2"}," UUID de transacción: ",-1)),t("code",ct,n(e.qrData.uuid),1),s[26]||(s[26]=t("p",{class:"mt-3 small text-muted"},[t("i",{class:"bi bi-info-circle"}),d(" QR simulado - Funcionalidad disponible próximamente ")],-1))])])]),t("div",mt,[t("div",bt,[s[32]||(s[32]=t("div",{class:"card-header"},[t("h6",{class:"mb-0"},"Resumen de Pago")],-1)),t("div",vt,[t("div",gt,[s[28]||(s[28]=t("span",null,"Subtotal:",-1)),t("strong",null,n(l(e.venta.subtotal||e.venta.total)),1)]),t("div",xt,[s[29]||(s[29]=t("span",null,"Descuento:",-1)),t("strong",pt,n(l(e.venta.descuento||0)),1)]),s[31]||(s[31]=t("hr",null,null,-1)),t("div",yt,[s[30]||(s[30]=t("strong",{class:"fs-5"},"TOTAL:",-1)),t("strong",ft,n(l(e.venta.total)),1)])])])])]),s[33]||(s[33]=t("div",{class:"text-center mt-4"},[t("p",{class:"text-muted"},"¡Gracias por su compra!"),t("p",{class:"small text-muted"}," Este documento es una representación de la boleta electrónica ")],-1))])])])]}),_:1}))}};export{Ct as default};
