import{Q as G,T as V,r as y,c as a,a as v,u as e,Z as L,w as _,b as s,i as h,e as n,d as S,j as p,f as c,n as m,p as u,o as i,t as d,F as x,m as U,q as R,v as A,N as D}from"./app-BM_Csk7S.js";import{_ as I}from"./AppLayout-Aol2IiYi.js";import{F as O}from"./FlashNotification-D_t33ewn.js";import{_ as T}from"./DialogModal-KP0K2W7x.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Modal-DVp3ZsaT.js";const H={class:"container py-4"},$={class:"row mb-4"},q={class:"col-lg-12"},z={class:"d-flex justify-content-between align-items-center"},J={class:"row"},Q={class:"col-lg-8 mx-auto"},W={class:"card"},Z={class:"card-body"},K={class:"row g-3"},X={class:"col-md-6"},Y={key:0,class:"invalid-feedback"},oo={class:"col-md-6"},so={class:"input-group"},eo=["value"],ro={key:0,class:"invalid-feedback d-block"},to={class:"col-md-12"},ao={key:0,class:"invalid-feedback"},io={class:"col-md-6"},lo={key:0,class:"invalid-feedback"},no={class:"col-md-6"},co={class:"form-check form-switch"},mo={class:"form-check-label",for:"estado"},po={key:0,class:"invalid-feedback d-block"},uo={class:"col-md-4"},bo={class:"input-group"},vo={key:0,class:"invalid-feedback"},_o={class:"col-md-4"},fo={class:"input-group"},go={key:0,class:"invalid-feedback"},ko={class:"col-md-4"},yo={class:"input-group"},xo={key:0,class:"invalid-feedback"},Co={class:"col-md-6"},wo={key:0,class:"invalid-feedback"},Po={class:"col-md-6"},Vo={key:0,class:"invalid-feedback"},ho={class:"col-md-12"},So={key:0,class:"invalid-feedback"},Uo={key:1,class:"mt-3 d-flex flex-wrap gap-2"},Bo=["src"],Mo={class:"col-md-12 mt-4"},Eo={class:"d-flex gap-2 justify-content-end"},No=["disabled"],jo={key:0},Fo={key:1},Go={class:"mb-3"},Lo={key:0,class:"invalid-feedback"},Ro={class:"mb-3"},Ao={key:0,class:"invalid-feedback"},Do=["disabled"],Io=["disabled"],Oo={key:0},To={key:1},Wo={__name:"Create",props:{categorias:Array},setup(B){const M=B,C=G(),r=V({codigo:"",nombre:"",precio_compra:"",precio_venta:"",precio_venta_mayorista:"",stock_actual:0,stock_minimo:0,marca:"",categoria_id:"",estado:!0,imagen:null}),f=y([]),g=y(!1),l=V({nombre:"",descripcion:""}),w=y([...M.categorias]),E=()=>{l.reset(),l.clearErrors(),g.value=!0},k=()=>{g.value=!1,l.reset()},P=()=>{l.post(route("categorias.store"),{preserveScroll:!0,onSuccess:()=>{D.reload({only:["categorias"],preserveScroll:!0,onSuccess:()=>{var o;w.value=[...C.props.categorias];const b=(o=C.props.flash)==null?void 0:o.categoria;b&&(r.categoria_id=b.id),k()}})}})},N=b=>{const o=Array.from(b.target.files);r.imagen=o,f.value=[],o.forEach(t=>{f.value.push(URL.createObjectURL(t))})},j=()=>{r.post(route("productos.store"),{preserveScroll:!0})};return(b,o)=>(i(),a(x,null,[v(e(L),{title:"Crear Producto"}),v(I,{title:"Crear Producto"},{default:_(()=>[v(O),s("div",H,[s("div",$,[s("div",q,[s("div",z,[o[13]||(o[13]=s("div",null,[s("h2",{class:"mb-0"},"Crear Producto"),s("p",{class:"text-muted"}," Registra un nuevo producto en el catálogo ")],-1)),v(e(h),{href:b.route("productos.index"),class:"btn btn-outline-secondary"},{default:_(()=>[...o[12]||(o[12]=[s("i",{class:"bi bi-arrow-left me-2"},null,-1),n(" Volver ",-1)])]),_:1},8,["href"])])])]),s("div",J,[s("div",Q,[s("div",W,[s("div",Z,[s("form",{onSubmit:S(j,["prevent"])},[s("div",K,[s("div",X,[o[14]||(o[14]=s("label",{for:"codigo",class:"form-label"},[n("Código "),s("span",{class:"text-danger"},"*")],-1)),p(s("input",{"onUpdate:modelValue":o[0]||(o[0]=t=>e(r).codigo=t),type:"text",class:m(["form-control",{"is-invalid":e(r).errors.codigo}]),id:"codigo",placeholder:"Ej: PROD-001"},null,2),[[u,e(r).codigo]]),e(r).errors.codigo?(i(),a("div",Y,d(e(r).errors.codigo),1)):c("",!0)]),s("div",oo,[o[17]||(o[17]=s("label",{for:"categoria_id",class:"form-label"},"Categoría",-1)),s("div",so,[p(s("select",{"onUpdate:modelValue":o[1]||(o[1]=t=>e(r).categoria_id=t),class:m(["form-select",{"is-invalid":e(r).errors.categoria_id}]),id:"categoria_id"},[o[15]||(o[15]=s("option",{value:""}," Sin categoría ",-1)),(i(!0),a(x,null,U(w.value,t=>(i(),a("option",{key:t.id,value:t.id},d(t.nombre),9,eo))),128))],2),[[R,e(r).categoria_id]]),s("button",{type:"button",class:"btn btn-outline-primary",onClick:E,title:"Crear nueva categoría"},[...o[16]||(o[16]=[s("i",{class:"bi bi-plus-lg"},null,-1)])])]),e(r).errors.categoria_id?(i(),a("div",ro,d(e(r).errors.categoria_id),1)):c("",!0),o[18]||(o[18]=s("small",{class:"text-muted"},"Opcional. Puedes crear una nueva categoría con el botón +",-1))]),s("div",to,[o[19]||(o[19]=s("label",{for:"nombre",class:"form-label"},[n("Nombre "),s("span",{class:"text-danger"},"*")],-1)),p(s("input",{"onUpdate:modelValue":o[2]||(o[2]=t=>e(r).nombre=t),type:"text",class:m(["form-control",{"is-invalid":e(r).errors.nombre}]),id:"nombre",placeholder:"Ej: Laptop HP ProBook 450 G8"},null,2),[[u,e(r).nombre]]),e(r).errors.nombre?(i(),a("div",ao,d(e(r).errors.nombre),1)):c("",!0)]),s("div",io,[o[20]||(o[20]=s("label",{for:"marca",class:"form-label"},"Marca",-1)),p(s("input",{"onUpdate:modelValue":o[3]||(o[3]=t=>e(r).marca=t),type:"text",class:m(["form-control",{"is-invalid":e(r).errors.marca}]),id:"marca",placeholder:"Ej: HP, Samsung, Sony"},null,2),[[u,e(r).marca]]),e(r).errors.marca?(i(),a("div",lo,d(e(r).errors.marca),1)):c("",!0)]),s("div",no,[o[21]||(o[21]=s("label",{class:"form-label d-block"},"Estado",-1)),s("div",co,[p(s("input",{"onUpdate:modelValue":o[4]||(o[4]=t=>e(r).estado=t),type:"checkbox",class:m(["form-check-input",{"is-invalid":e(r).errors.estado}]),id:"estado",role:"switch"},null,2),[[A,e(r).estado]]),s("label",mo,d(e(r).estado?"Activo":"Inactivo"),1)]),e(r).errors.estado?(i(),a("div",po,d(e(r).errors.estado),1)):c("",!0)]),s("div",uo,[o[23]||(o[23]=s("label",{for:"precio_compra",class:"form-label"},[n("Precio Compra (Bs) "),s("span",{class:"text-danger"},"*")],-1)),s("div",bo,[o[22]||(o[22]=s("span",{class:"input-group-text"},"Bs.",-1)),p(s("input",{"onUpdate:modelValue":o[5]||(o[5]=t=>e(r).precio_compra=t),type:"number",step:"0.01",class:m(["form-control",{"is-invalid":e(r).errors.precio_compra}]),id:"precio_compra",placeholder:"0.00"},null,2),[[u,e(r).precio_compra]]),e(r).errors.precio_compra?(i(),a("div",vo,d(e(r).errors.precio_compra),1)):c("",!0)])]),s("div",_o,[o[25]||(o[25]=s("label",{for:"precio_venta",class:"form-label"},[n("Precio Venta (Bs) "),s("span",{class:"text-danger"},"*")],-1)),s("div",fo,[o[24]||(o[24]=s("span",{class:"input-group-text"},"Bs.",-1)),p(s("input",{"onUpdate:modelValue":o[6]||(o[6]=t=>e(r).precio_venta=t),type:"number",step:"0.01",class:m(["form-control",{"is-invalid":e(r).errors.precio_venta}]),id:"precio_venta",placeholder:"0.00"},null,2),[[u,e(r).precio_venta]]),e(r).errors.precio_venta?(i(),a("div",go,d(e(r).errors.precio_venta),1)):c("",!0)])]),s("div",ko,[o[27]||(o[27]=s("label",{for:"precio_venta_mayorista",class:"form-label"},[n("Precio Mayorista (Bs) "),s("span",{class:"text-danger"},"*")],-1)),s("div",yo,[o[26]||(o[26]=s("span",{class:"input-group-text"},"Bs.",-1)),p(s("input",{"onUpdate:modelValue":o[7]||(o[7]=t=>e(r).precio_venta_mayorista=t),type:"number",step:"0.01",class:m(["form-control",{"is-invalid":e(r).errors.precio_venta_mayorista}]),id:"precio_venta_mayorista",placeholder:"0.00"},null,2),[[u,e(r).precio_venta_mayorista]]),e(r).errors.precio_venta_mayorista?(i(),a("div",xo,d(e(r).errors.precio_venta_mayorista),1)):c("",!0)])]),s("div",Co,[o[28]||(o[28]=s("label",{for:"stock_actual",class:"form-label"},[n("Stock Actual "),s("span",{class:"text-danger"},"*")],-1)),p(s("input",{"onUpdate:modelValue":o[8]||(o[8]=t=>e(r).stock_actual=t),type:"number",class:m(["form-control",{"is-invalid":e(r).errors.stock_actual}]),id:"stock_actual",placeholder:"0",min:"0"},null,2),[[u,e(r).stock_actual]]),e(r).errors.stock_actual?(i(),a("div",wo,d(e(r).errors.stock_actual),1)):c("",!0)]),s("div",Po,[o[29]||(o[29]=s("label",{for:"stock_minimo",class:"form-label"},[n("Stock Mínimo "),s("span",{class:"text-danger"},"*")],-1)),p(s("input",{"onUpdate:modelValue":o[9]||(o[9]=t=>e(r).stock_minimo=t),type:"number",class:m(["form-control",{"is-invalid":e(r).errors.stock_minimo}]),id:"stock_minimo",placeholder:"0",min:"0"},null,2),[[u,e(r).stock_minimo]]),e(r).errors.stock_minimo?(i(),a("div",Vo,d(e(r).errors.stock_minimo),1)):c("",!0)]),s("div",ho,[o[30]||(o[30]=s("label",{for:"imagen",class:"form-label"},"Imágenes del Producto",-1)),s("input",{type:"file",class:m(["form-control",{"is-invalid":e(r).errors.imagen}]),id:"imagen",accept:"image/*",multiple:"",onChange:N},null,34),e(r).errors.imagen?(i(),a("div",So,d(e(r).errors.imagen),1)):c("",!0),o[31]||(o[31]=s("small",{class:"text-muted"},"Formatos: JPG, PNG, WEBP. Máx: 2MB c/u. Puedes seleccionar múltiples imágenes",-1)),f.value.length>0?(i(),a("div",Uo,[(i(!0),a(x,null,U(f.value,(t,F)=>(i(),a("img",{key:F,src:t,alt:"Preview",class:"img-thumbnail",style:{"max-width":"150px",height:"150px","object-fit":"cover"}},null,8,Bo))),128))])):c("",!0)]),s("div",Mo,[s("div",Eo,[v(e(h),{href:b.route("productos.index"),class:"btn btn-secondary"},{default:_(()=>[...o[32]||(o[32]=[n(" Cancelar ",-1)])]),_:1},8,["href"]),s("button",{type:"submit",class:"btn btn-primary",disabled:e(r).processing},[e(r).processing?(i(),a("span",jo,[...o[33]||(o[33]=[s("i",{class:"bi bi-hourglass-split me-2"},null,-1),n(" Guardando... ",-1)])])):(i(),a("span",Fo,[...o[34]||(o[34]=[s("i",{class:"bi bi-save me-2"},null,-1),n(" Guardar Producto ",-1)])]))],8,No)])])])],32)])])])])]),v(T,{show:g.value,onClose:k,"max-width":"sm"},{title:_(()=>[...o[35]||(o[35]=[s("i",{class:"bi bi-folder-plus me-2"},null,-1),n(" Crear Categoría Rápida ",-1)])]),content:_(()=>[s("form",{onSubmit:S(P,["prevent"])},[s("div",Go,[o[36]||(o[36]=s("label",{for:"categoria_nombre",class:"form-label"},[n("Nombre de la Categoría "),s("span",{class:"text-danger"},"*")],-1)),p(s("input",{"onUpdate:modelValue":o[10]||(o[10]=t=>e(l).nombre=t),type:"text",class:m(["form-control",{"is-invalid":e(l).errors.nombre}]),id:"categoria_nombre",placeholder:"Ej: Electrónica",autofocus:""},null,2),[[u,e(l).nombre]]),e(l).errors.nombre?(i(),a("div",Lo,d(e(l).errors.nombre),1)):c("",!0)]),s("div",Ro,[o[37]||(o[37]=s("label",{for:"categoria_descripcion",class:"form-label"},"Descripción",-1)),p(s("textarea",{"onUpdate:modelValue":o[11]||(o[11]=t=>e(l).descripcion=t),class:m(["form-control",{"is-invalid":e(l).errors.descripcion}]),id:"categoria_descripcion",rows:"3",placeholder:"Breve descripción de la categoría (opcional)"},null,2),[[u,e(l).descripcion]]),e(l).errors.descripcion?(i(),a("div",Ao,d(e(l).errors.descripcion),1)):c("",!0)])],32)]),footer:_(()=>[s("button",{type:"button",class:"btn btn-secondary",onClick:k,disabled:e(l).processing}," Cancelar ",8,Do),s("button",{type:"button",class:"btn btn-primary",onClick:P,disabled:e(l).processing},[e(l).processing?(i(),a("span",Oo,[...o[38]||(o[38]=[s("i",{class:"bi bi-hourglass-split me-2"},null,-1),n(" Guardando... ",-1)])])):(i(),a("span",To,[...o[39]||(o[39]=[s("i",{class:"bi bi-save me-2"},null,-1),n(" Crear Categoría ",-1)])]))],8,Io)]),_:1},8,["show"])]),_:1})],64))}};export{Wo as default};
