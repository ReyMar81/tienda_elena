import{_ as y}from"./AppLayout-Aol2IiYi.js";import{h as x,g as P,w as g,b as t,a as b,t as o,u as k,i as C,e as n,c as a,f as u,n as c,o as i,F as v,m as h,x as w}from"./app-BM_Csk7S.js";import{Q as B}from"./QRPayment-BbRC9gJP.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const S={class:"container py-4"},D={class:"d-flex justify-content-between align-items-center mb-4"},E={class:"row g-4"},T={class:"col-md-4"},q={class:"card"},F={class:"card-body"},N={key:0},V={key:0,class:"card mt-3"},L={class:"card-body"},M={class:"text-danger"},j={key:0,class:"mt-3"},z={class:"list-group list-group-flush"},$={class:"d-flex justify-content-between"},A={class:"text-muted"},I={class:"col-md-8"},O={class:"card"},Q={class:"card-header"},G={class:"mb-0"},R={class:"card-body"},U={class:"table-responsive"},H={class:"table"},J={class:"text-center"},K={class:"text-end"},W={class:"text-end"},X={class:"text-end"},Y={class:"mb-0 text-primary"},Z={key:0,class:"col-md-4"},_={class:"card"},tt={class:"card-body"},et={key:1,class:"col-md-4"},dt={class:"card"},ot={class:"mb-0"},st={class:"card-body text-center p-4"},it={class:"mt-3"},nt={class:"text-muted"},at={key:0,class:"alert alert-light text-start mt-3"},lt={class:"mb-0 small"},gt={__name:"Show",props:{pedido:Object},setup(e){const f=e,r=l=>parseFloat(l||0).toFixed(2),m=l=>`bg-${{pendiente:"warning",completada:"success",pagado:"success",anulada:"danger",cancelada:"secondary"}[l]||"secondary"}`,p=x(()=>f.pedido.detalles.reduce((l,d)=>l+d.cantidad,0));return(l,d)=>(i(),P(y,{title:"Detalle de Pedido"},{default:g(()=>[t("div",S,[t("div",D,[t("h2",null,"Detalle del Pedido #"+o(e.pedido.numero_venta),1),b(k(C),{href:l.route("mis-pedidos.index"),class:"btn btn-outline-secondary"},{default:g(()=>[...d[0]||(d[0]=[t("i",{class:"bi bi-arrow-left"},null,-1),n(" Volver a Mis Pedidos ",-1)])]),_:1},8,["href"])]),t("div",E,[t("div",T,[t("div",q,[d[6]||(d[6]=t("div",{class:"card-header"},[t("h5",{class:"mb-0"},"Información General")],-1)),t("div",F,[t("p",null,[d[1]||(d[1]=t("strong",null,"Número:",-1)),n(" #"+o(e.pedido.numero_venta),1)]),t("p",null,[d[2]||(d[2]=t("strong",null,"Fecha:",-1)),n(" "+o(new Date(e.pedido.created_at).toLocaleDateString("es-ES",{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})),1)]),t("p",null,[d[3]||(d[3]=t("strong",null,"Estado:",-1)),t("span",{class:c(["badge ms-2",m(e.pedido.estado)])},o(e.pedido.estado),3)]),t("p",null,[d[4]||(d[4]=t("strong",null,"Método de Pago:",-1)),t("span",{class:c(["badge ms-2",e.pedido.metodo_pago==="credito"?"bg-info":"bg-primary"])},o(e.pedido.metodo_pago==="credito"?"Crédito":"Contado"),3)]),e.pedido.vendedor?(i(),a("p",N,[d[5]||(d[5]=t("strong",null,"Atendido por:",-1)),n(" "+o(e.pedido.vendedor.nombre)+" "+o(e.pedido.vendedor.apellidos),1)])):u("",!0)])]),e.pedido.credito?(i(),a("div",V,[d[12]||(d[12]=t("div",{class:"card-header bg-info text-white"},[t("h5",{class:"mb-0"},"Información de Crédito")],-1)),t("div",L,[t("p",null,[d[7]||(d[7]=t("strong",null,"Monto Total:",-1)),n(" Bs. "+o(r(e.pedido.credito.monto_total)),1)]),t("p",null,[d[8]||(d[8]=t("strong",null,"Saldo Pendiente:",-1)),t("span",M,"Bs. "+o(r(e.pedido.credito.monto_pendiente)),1)]),t("p",null,[d[9]||(d[9]=t("strong",null,"Cuotas:",-1)),n(" "+o(e.pedido.credito.numero_cuotas),1)]),t("p",null,[d[10]||(d[10]=t("strong",null,"Estado:",-1)),t("span",{class:c(["badge",m(e.pedido.credito.estado)])},o(e.pedido.credito.estado),3)]),e.pedido.credito.cuotas?(i(),a("div",j,[d[11]||(d[11]=t("h6",null,"Cuotas:",-1)),t("ul",z,[(i(!0),a(v,null,h(e.pedido.credito.cuotas,s=>(i(),a("li",{key:s.id,class:"list-group-item px-0"},[t("div",$,[t("span",null,[n(" Cuota "+o(s.numero_cuota)+" ",1),t("small",A," ("+o(new Date(s.fecha_vencimiento).toLocaleDateString("es-ES"))+") ",1)]),t("strong",null,"Bs. "+o(r(s.monto)),1)]),t("span",{class:c(["badge",m(s.estado)])},o(s.estado),3)]))),128))])])):u("",!0)])])):u("",!0)]),t("div",I,[t("div",O,[t("div",Q,[t("h5",G," Productos ("+o(p.value)+" items) ",1)]),t("div",R,[t("div",U,[t("table",H,[d[14]||(d[14]=t("thead",null,[t("tr",null,[t("th",null,"Producto"),t("th",null,"Código"),t("th",{class:"text-center"}," Cantidad "),t("th",{class:"text-end"}," Precio Unit. "),t("th",{class:"text-end"},"Subtotal")])],-1)),t("tbody",null,[(i(!0),a(v,null,h(e.pedido.detalles,s=>(i(),a("tr",{key:s.id},[t("td",null,[t("strong",null,o(s.producto.nombre),1)]),t("td",null,[t("code",null,o(s.producto.codigo),1)]),t("td",J,o(s.cantidad),1),t("td",K," Bs. "+o(r(s.precio)),1),t("td",W,[t("strong",null,"Bs. "+o(r(s.subtotal)),1)])]))),128))]),t("tfoot",null,[t("tr",null,[d[13]||(d[13]=t("td",{colspan:"4",class:"text-end"},[t("strong",null,"TOTAL:")],-1)),t("td",X,[t("h4",Y," Bs. "+o(r(e.pedido.total)),1)])])])])])])])]),e.pedido.estado==="pendiente"&&e.pedido.pago_facil_qr_image?(i(),a("div",Z,[t("div",_,[d[15]||(d[15]=t("div",{class:"card-header bg-warning text-dark"},[t("h5",{class:"mb-0"},[t("i",{class:"bi bi-qr-code me-2"}),n(" Pagar Pedido ")])],-1)),t("div",tt,[b(B,{"qr-image":e.pedido.pago_facil_qr_image,"transaction-id":e.pedido.pago_facil_transaction_id,monto:e.pedido.total,descripcion:`Pedido #${e.pedido.numero_venta}`,status:e.pedido.pago_facil_status||"pending"},null,8,["qr-image","transaction-id","monto","descripcion","status"])])])])):e.pedido.estado==="pagado"||e.pedido.estado==="enviado"?(i(),a("div",et,[t("div",dt,[t("div",{class:c(["card-header",e.pedido.estado==="enviado"?"bg-success text-white":"bg-info text-white"])},[t("h5",ot,[t("i",{class:c(["bi",e.pedido.estado==="enviado"?"bi-truck":"bi-clock-history"])},null,2),n(" "+o(e.pedido.estado==="enviado"?"Pedido en Camino":"Esperando Confirmación"),1)])],2),t("div",st,[t("i",{class:c(["bi",e.pedido.estado==="enviado"?"bi-truck":"bi-check-circle-fill"]),style:w([{"font-size":"4rem"},{color:e.pedido.estado==="enviado"?"#28a745":"#17a2b8"}])},null,6),t("h5",it,o(e.pedido.estado==="enviado"?"¡Tu pedido está en camino!":"¡Pago Confirmado!"),1),t("p",nt,o(e.pedido.estado==="enviado"?"Pronto recibirás tu pedido en la dirección indicada.":"Tu pago ha sido confirmado. Pronto tu pedido será enviado."),1),e.pedido.direccion_entrega?(i(),a("div",at,[d[16]||(d[16]=t("h6",{class:"mb-2"},[t("i",{class:"bi bi-geo-alt me-2"}),n(" Dirección de Entrega: ")],-1)),t("p",lt,o(e.pedido.direccion_entrega),1)])):u("",!0)])])])):u("",!0)])])]),_:1}))}};export{gt as default};
