import{r as h,c as a,a as p,u as b,Z as V,w as u,b as t,g as y,f as d,o as l,i as f,e as r,j as $,s as L,p as j,F as _,m as T,t as m,n as F,N as B}from"./app-9HEqLJnm.js";import{_ as H}from"./AppLayout-DD1QV7aw.js";import{F as O}from"./FlashNotification-r1BZxJy9.js";import{_ as q}from"./ConfirmationModal-Bq64hp6h.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Modal-CRs6EPgD.js";const z={class:"container py-4"},A={class:"row mb-4"},K={class:"col-lg-4 text-end"},G={class:"card mb-4"},I={class:"card-body"},P={class:"row"},U={class:"col-lg-6"},Z={class:"input-group"},J={class:"card"},Q={class:"card-body"},R={class:"table-responsive"},W={class:"table table-hover align-middle"},X={key:0},Y={class:"text-muted"},tt={class:"text-center"},et={class:"badge bg-info"},st={class:"text-center"},lt={class:"btn-group btn-group-sm",role:"group"},at=["onClick"],ot={key:0,class:"mt-4"},nt={class:"pagination justify-content-center"},rt=["innerHTML"],it={class:"mb-0"},ut={key:0,class:"text-warning small mb-0 mt-2"},ht={__name:"Index",props:{categorias:Object,filters:Object},setup(c){const v=h(c.filters.search||""),g=h(!1),o=h(null),k=()=>{B.get(route("categorias.index"),{search:v.value},{preserveState:!0,replace:!0})},M=n=>{o.value=n,g.value=!0},S=()=>{o.value&&B.delete(route("categorias.destroy",o.value.id),{preserveScroll:!0,onSuccess:()=>{g.value=!1,o.value=null}})},C=()=>{g.value=!1,o.value=null};return(n,e)=>(l(),a(_,null,[p(b(V),{title:"Categorías"}),p(H,{title:"Categorías"},{default:u(()=>{var x,w;return[p(O),t("div",z,[t("div",A,[e[2]||(e[2]=t("div",{class:"col-lg-8"},[t("h2",{class:"mb-0"},"Gestión de Categorías"),t("p",{class:"text-muted"}," Organiza tus productos por categorías ")],-1)),t("div",K,[(w=(x=n.$page.props.auth.permissions)==null?void 0:x.categorias)!=null&&w.create?(l(),y(b(f),{key:0,href:n.route("categorias.create"),class:"btn btn-primary"},{default:u(()=>[...e[1]||(e[1]=[t("i",{class:"bi bi-plus-circle me-2"},null,-1),r(" Nueva Categoría ",-1)])]),_:1},8,["href"])):d("",!0)])]),t("div",G,[t("div",I,[t("div",P,[t("div",U,[t("div",Z,[$(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>v.value=s),type:"text",class:"form-control",placeholder:"Buscar categoría...",onKeyup:L(k,["enter"])},null,544),[[j,v.value]]),t("button",{class:"btn btn-outline-secondary",type:"button",onClick:k},[...e[3]||(e[3]=[t("i",{class:"bi bi-search"},null,-1),r(" Buscar ",-1)])])])])])])]),t("div",J,[t("div",Q,[t("div",R,[t("table",W,[e[8]||(e[8]=t("thead",null,[t("tr",null,[t("th",null,"Nombre"),t("th",null,"Descripción"),t("th",{class:"text-center"},"Productos"),t("th",{class:"text-center",style:{width:"180px"}}," Acciones ")])],-1)),t("tbody",null,[c.categorias.data.length===0?(l(),a("tr",X,[...e[4]||(e[4]=[t("td",{colspan:"4",class:"text-center text-muted py-4"}," No se encontraron categorías ",-1)])])):d("",!0),(l(!0),a(_,null,T(c.categorias.data,s=>{var i,N,E,D;return l(),a("tr",{key:s.id},[t("td",null,[t("strong",null,m(s.nombre),1)]),t("td",null,[t("span",Y,m(s.descripcion||"Sin descripción"),1)]),t("td",tt,[t("span",et,m(s.productos_count)+" productos ",1)]),t("td",st,[t("div",lt,[p(b(f),{href:n.route("categorias.show",s.id),class:"btn btn-outline-info",title:"Ver detalles"},{default:u(()=>[...e[5]||(e[5]=[t("i",{class:"bi bi-eye-fill"},null,-1)])]),_:1},8,["href"]),(N=(i=n.$page.props.auth.permissions)==null?void 0:i.categorias)!=null&&N.update?(l(),y(b(f),{key:0,href:n.route("categorias.edit",s.id),class:"btn btn-outline-warning",title:"Editar"},{default:u(()=>[...e[6]||(e[6]=[t("i",{class:"bi bi-pencil-fill"},null,-1)])]),_:1},8,["href"])):d("",!0),(D=(E=n.$page.props.auth.permissions)==null?void 0:E.categorias)!=null&&D.delete?(l(),a("button",{key:1,onClick:ct=>M(s),class:"btn btn-outline-danger",title:"Eliminar"},[...e[7]||(e[7]=[t("i",{class:"bi bi-trash-fill"},null,-1)])],8,at)):d("",!0)])])])}),128))])])]),c.categorias.links.length>3?(l(),a("div",ot,[t("nav",null,[t("ul",nt,[(l(!0),a(_,null,T(c.categorias.links,(s,i)=>(l(),a("li",{key:i,class:F(["page-item",{active:s.active,disabled:!s.url}])},[s.url?(l(),y(b(f),{key:0,href:s.url,class:"page-link",innerHTML:s.label,"preserve-state":""},null,8,["href","innerHTML"])):(l(),a("span",{key:1,class:"page-link",innerHTML:s.label},null,8,rt))],2))),128))])])])):d("",!0)])])]),p(q,{show:g.value,onClose:C,"max-width":"sm"},{title:u(()=>[...e[9]||(e[9]=[r(" Confirmar Eliminación de Categoría ",-1)])]),content:u(()=>{var s,i;return[t("p",it,[e[10]||(e[10]=r(" ¿Está seguro de que desea eliminar la categoría ",-1)),t("strong",null,m((s=o.value)==null?void 0:s.nombre),1),e[11]||(e[11]=r("? ",-1))]),((i=o.value)==null?void 0:i.productos_count)>0?(l(),a("p",ut,[e[12]||(e[12]=t("i",{class:"bi bi-exclamation-triangle-fill me-1"},null,-1)),e[13]||(e[13]=r(" Esta categoría tiene ",-1)),t("strong",null,m(o.value.productos_count),1),e[14]||(e[14]=r(" producto(s) asociado(s). Al eliminarla, estos productos quedarán sin categoría asignada. ",-1))])):d("",!0),e[15]||(e[15]=t("p",{class:"text-muted small mb-0 mt-2"}," Esta acción no se puede deshacer. ",-1))]}),footer:u(()=>[t("button",{type:"button",class:"btn btn-secondary",onClick:C}," Cancelar "),t("button",{type:"button",class:"btn btn-danger",onClick:S},[...e[16]||(e[16]=[t("i",{class:"bi bi-trash-fill me-2"},null,-1),r(" Eliminar ",-1)])])]),_:1},8,["show"])]}),_:1})],64))}};export{ht as default};
