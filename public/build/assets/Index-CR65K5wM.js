import{r as _,c as o,a as p,u as b,Z as S,w as a,b as e,g as x,f as c,o as l,i as g,e as u,j as V,s as P,p as j,F as k,m as F,t as i,n as T,N as B}from"./app-DTocK5dB.js";import{_ as A}from"./AppLayout-ChHXXbMF.js";import{F as H}from"./FlashNotification-BbasMMB-.js";import{_ as I}from"./ConfirmationModal-DHpBYFyc.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Modal-CmbPbOej.js";const O={class:"container py-4"},K={class:"row mb-4"},z={class:"col-lg-4 text-end"},G={class:"card mb-4"},U={class:"card-body"},Z={class:"input-group",style:{"max-width":"400px"}},q={class:"card"},J={class:"card-body"},Q={class:"table-responsive"},R={class:"table table-hover align-middle"},W={key:0},X={class:"text-muted"},Y={class:"text-center"},ee={class:"badge bg-success fs-6"},te={class:"text-center"},se={class:"text-center"},ne={class:"btn-group btn-group-sm"},le=["onClick"],oe={key:0,class:"mt-4"},ae={class:"pagination justify-content-center"},ie=["innerHTML"],re={key:0},he={__name:"Index",props:{promociones:Object,filters:Object},setup(d){const y=_(d.filters.search||""),m=_(!1),r=_(null),w=()=>{B.get(route("promociones.index"),{search:y.value},{preserveState:!0,replace:!0})},L=n=>{r.value=n,m.value=!0},M=()=>{r.value&&B.delete(route("promociones.destroy",r.value.id),{preserveScroll:!0,onSuccess:()=>{m.value=!1,r.value=null}})},D=n=>new Date(n).toLocaleDateString("es-BO"),C=n=>{const t=new Date,f=new Date(n.fecha_inicio),v=new Date(n.fecha_fin);return t>=f&&t<=v&&n.estado};return(n,t)=>(l(),o(k,null,[p(b(S),{title:"Promociones"}),p(A,{title:"Promociones"},{default:a(()=>{var f,v;return[p(H),e("div",O,[e("div",K,[t[4]||(t[4]=e("div",{class:"col-lg-8"},[e("h2",{class:"mb-0"},"Gestión de Promociones"),e("p",{class:"text-muted"}," Administra descuentos y ofertas especiales ")],-1)),e("div",z,[(v=(f=n.$page.props.auth.permissions)==null?void 0:f.promociones)!=null&&v.create?(l(),x(b(g),{key:0,href:n.route("promociones.create"),class:"btn btn-primary"},{default:a(()=>[...t[3]||(t[3]=[e("i",{class:"bi bi-plus-circle me-2"},null,-1),u(" Nueva Promoción ",-1)])]),_:1},8,["href"])):c("",!0)])]),e("div",G,[e("div",U,[e("div",Z,[V(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>y.value=s),type:"text",class:"form-control",placeholder:"Buscar promoción...",onKeyup:P(w,["enter"])},null,544),[[j,y.value]]),e("button",{class:"btn btn-outline-secondary",onClick:w},[...t[5]||(t[5]=[e("i",{class:"bi bi-search"},null,-1)])])])])]),e("div",q,[e("div",J,[e("div",Q,[e("table",R,[t[11]||(t[11]=e("thead",null,[e("tr",null,[e("th",null,"Nombre"),e("th",{class:"text-center"},"Descuento"),e("th",null,"Fecha Inicio"),e("th",null,"Fecha Fin"),e("th",{class:"text-center"},"Estado"),e("th",{class:"text-center"},"Acciones")])],-1)),e("tbody",null,[d.promociones.data.length===0?(l(),o("tr",W,[...t[6]||(t[6]=[e("td",{colspan:"6",class:"text-center text-muted py-4"}," No se encontraron promociones ",-1)])])):c("",!0),(l(!0),o(k,null,F(d.promociones.data,s=>{var h,N,E,$;return l(),o("tr",{key:s.id},[e("td",null,[e("strong",null,i(s.nombre),1),t[7]||(t[7]=e("br",null,null,-1)),e("small",X,i(s.descripcion),1)]),e("td",Y,[e("span",ee,i(s.valor_descuento_decimal)+"%",1)]),e("td",null,i(D(s.fecha_inicio)),1),e("td",null,i(D(s.fecha_fin)),1),e("td",te,[e("span",{class:T(["badge",C(s)?"bg-success":"bg-secondary"])},i(C(s)?"Activa":"Inactiva"),3)]),e("td",se,[e("div",ne,[p(b(g),{href:n.route("promociones.show",s.id),class:"btn btn-outline-info",title:"Ver Detalles"},{default:a(()=>[...t[8]||(t[8]=[e("i",{class:"bi bi-eye"},null,-1)])]),_:1},8,["href"]),(N=(h=n.$page.props.auth.permissions)==null?void 0:h.promociones)!=null&&N.update?(l(),x(b(g),{key:0,href:n.route("promociones.edit",s.id),class:"btn btn-outline-primary",title:"Editar"},{default:a(()=>[...t[9]||(t[9]=[e("i",{class:"bi bi-pencil"},null,-1)])]),_:1},8,["href"])):c("",!0),($=(E=n.$page.props.auth.permissions)==null?void 0:E.promociones)!=null&&$.delete?(l(),o("button",{key:1,onClick:ue=>L(s),class:"btn btn-outline-danger",title:"Eliminar"},[...t[10]||(t[10]=[e("i",{class:"bi bi-trash"},null,-1)])],8,le)):c("",!0)])])])}),128))])])]),d.promociones.links.length>3?(l(),o("div",oe,[e("nav",null,[e("ul",ae,[(l(!0),o(k,null,F(d.promociones.links,(s,h)=>(l(),o("li",{key:h,class:T(["page-item",{active:s.active,disabled:!s.url}])},[s.url?(l(),x(b(g),{key:0,href:s.url,class:"page-link",innerHTML:s.label,"preserve-state":""},null,8,["href","innerHTML"])):(l(),o("span",{key:1,class:"page-link",innerHTML:s.label},null,8,ie))],2))),128))])])])):c("",!0)])])]),p(I,{show:m.value,onClose:t[2]||(t[2]=s=>m.value=!1),"max-width":"sm"},{title:a(()=>[...t[12]||(t[12]=[u("Confirmar Eliminación",-1)])]),content:a(()=>[r.value?(l(),o("p",re,[t[13]||(t[13]=u(" ¿Está seguro de eliminar la promoción ",-1)),e("strong",null,'"'+i(r.value.nombre)+'"',1),t[14]||(t[14]=u("? ",-1))])):c("",!0),t[15]||(t[15]=e("p",{class:"text-danger mb-0"},[e("i",{class:"bi bi-exclamation-triangle me-2"}),u(" Esta acción no se puede deshacer. ")],-1))]),footer:a(()=>[e("button",{type:"button",class:"btn btn-secondary",onClick:t[1]||(t[1]=s=>m.value=!1)}," Cancelar "),e("button",{type:"button",class:"btn btn-danger",onClick:M},[...t[16]||(t[16]=[e("i",{class:"bi bi-trash me-2"},null,-1),u(" Eliminar ",-1)])])]),_:1},8,["show"])]}),_:1})],64))}};export{he as default};
