import{r as J,h as K,g as Q,w as m,b as s,t as l,j as y,p as w,e as _,c as n,f as W,o as d,F as O,m as U,a as h,u as g,i as v,n as k,N as G}from"./app-9HEqLJnm.js";import{_ as X}from"./AppLayout-DD1QV7aw.js";import{_ as Y}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Z={class:"container py-4"},ss={class:"row mb-4"},ts={class:"col-md-4"},es={class:"card border-0 shadow-sm"},as={class:"card-body"},ls={class:"d-flex align-items-center"},os={class:"flex-grow-1 ms-3"},is={class:"mb-0"},ds={class:"col-md-4"},ns={class:"card border-0 shadow-sm"},cs={class:"card-body"},rs={class:"d-flex align-items-center"},us={class:"flex-grow-1 ms-3"},ms={class:"mb-0"},bs={class:"col-md-4"},fs={class:"card border-0 shadow-sm"},hs={class:"card-body"},gs={class:"d-flex align-items-center"},vs={class:"flex-grow-1 ms-3"},_s={class:"mb-0"},ps={class:"card shadow-sm mb-4"},xs={class:"card-body"},ys={class:"row g-3"},ws={class:"col-md-3"},ks={class:"col-md-3"},Cs={class:"col-md-3"},Fs={class:"card shadow-sm"},Ns={class:"card-body p-0"},Vs={key:0,class:"text-center text-muted py-5"},Bs={key:1,class:"table-responsive"},Ms={class:"table table-hover align-middle mb-0"},Ts={class:"ps-3"},js={class:"badge bg-secondary"},Ds={class:"text-muted"},Is={class:"fw-semibold"},Ps={class:"text-muted"},Ss={class:"badge bg-info"},zs={class:"badge bg-light text-dark"},As={class:"fw-bold text-success"},Ls={class:"badge bg-primary"},Es={class:"text-center pe-3"},Os={key:0,class:"card-footer bg-white"},Us={class:"d-flex justify-content-between align-items-center"},Gs={class:"text-muted small"},Hs={class:"pagination pagination-sm mb-0"},Rs={__name:"Index",props:{pagos:Object,filters:Object,estadisticas:Object},setup(a){var F,N,V;const b=a,i=J({buscar:((F=b.filters)==null?void 0:F.buscar)||"",fecha_desde:((N=b.filters)==null?void 0:N.fecha_desde)||"",fecha_hasta:((V=b.filters)==null?void 0:V.fecha_hasta)||""});let C=null;const H=()=>{clearTimeout(C),C=setTimeout(()=>{p()},500)},p=()=>{G.get(route("pagos.index"),{buscar:i.value.buscar||void 0,fecha_desde:i.value.fecha_desde||void 0,fecha_hasta:i.value.fecha_hasta||void 0},{preserveState:!0,preserveScroll:!0})},R=()=>{i.value={buscar:"",fecha_desde:"",fecha_hasta:""},G.get(route("pagos.index"))},$=K(()=>{const o=[],t=b.pagos.last_page,e=b.pagos.current_page,f=2;let c=Math.max(1,e-f),r=Math.min(t,e+f);c>1&&(o.push(1),c>2&&o.push("..."));for(let u=c;u<=r;u++)o.push(u);return r<t&&(r<t-1&&o.push("..."),o.push(t)),o}),x=o=>parseFloat(o||0).toFixed(2),q=o=>new Date(o).toLocaleDateString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit"});return(o,t)=>(d(),Q(X,{title:"Gestión de Pagos"},{default:m(()=>[s("div",Z,[t[19]||(t[19]=s("div",{class:"d-flex justify-content-between align-items-center mb-4"},[s("div",null,[s("h2",{class:"mb-1"},"Gestión de Pagos"),s("p",{class:"text-muted mb-0"}," Historial de pagos registrados en el sistema ")])],-1)),s("div",ss,[s("div",ts,[s("div",es,[s("div",as,[s("div",ls,[t[4]||(t[4]=s("div",{class:"flex-shrink-0"},[s("div",{class:"bg-primary bg-opacity-10 rounded p-3"},[s("i",{class:"bi bi-receipt text-primary",style:{"font-size":"1.5rem"}})])],-1)),s("div",os,[t[3]||(t[3]=s("div",{class:"text-muted small"}," Total Pagos ",-1)),s("h4",is,l(a.estadisticas.total_pagos),1)])])])])]),s("div",ds,[s("div",ns,[s("div",cs,[s("div",rs,[t[6]||(t[6]=s("div",{class:"flex-shrink-0"},[s("div",{class:"bg-success bg-opacity-10 rounded p-3"},[s("i",{class:"bi bi-cash-stack text-success",style:{"font-size":"1.5rem"}})])],-1)),s("div",us,[t[5]||(t[5]=s("div",{class:"text-muted small"}," Total Recaudado ",-1)),s("h4",ms," Bs. "+l(x(a.estadisticas.total_monto)),1)])])])])]),s("div",bs,[s("div",fs,[s("div",hs,[s("div",gs,[t[8]||(t[8]=s("div",{class:"flex-shrink-0"},[s("div",{class:"bg-info bg-opacity-10 rounded p-3"},[s("i",{class:"bi bi-calendar-month text-info",style:{"font-size":"1.5rem"}})])],-1)),s("div",vs,[t[7]||(t[7]=s("div",{class:"text-muted small"}," Pagos del Mes ",-1)),s("h4",_s," Bs. "+l(x(a.estadisticas.pagos_mes)),1)])])])])])]),s("div",ps,[s("div",xs,[s("div",ys,[s("div",ws,[t[9]||(t[9]=s("label",{class:"form-label small fw-semibold"},"Buscar",-1)),y(s("input",{type:"text",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=e=>i.value.buscar=e),onInput:H,placeholder:"Cliente o CI..."},null,544),[[w,i.value.buscar]])]),s("div",ks,[t[10]||(t[10]=s("label",{class:"form-label small fw-semibold"},"Fecha Desde",-1)),y(s("input",{type:"date",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=e=>i.value.fecha_desde=e),onChange:p},null,544),[[w,i.value.fecha_desde]])]),s("div",Cs,[t[11]||(t[11]=s("label",{class:"form-label small fw-semibold"},"Fecha Hasta",-1)),y(s("input",{type:"date",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=e=>i.value.fecha_hasta=e),onChange:p},null,544),[[w,i.value.fecha_hasta]])]),s("div",{class:"col-md-3 d-flex align-items-end"},[s("button",{onClick:R,class:"btn btn-outline-secondary w-100"},[...t[12]||(t[12]=[s("i",{class:"bi bi-x-circle me-1"},null,-1),_(" Limpiar ",-1)])])])])])]),s("div",Fs,[t[18]||(t[18]=s("div",{class:"card-header bg-white py-3"},[s("h5",{class:"mb-0"},"Listado de Pagos")],-1)),s("div",Ns,[a.pagos.data.length===0?(d(),n("div",Vs,[...t[13]||(t[13]=[s("i",{class:"bi bi-inbox",style:{"font-size":"3rem"}},null,-1),s("p",{class:"mt-3 mb-0"},"No hay pagos registrados",-1)])])):(d(),n("div",Bs,[s("table",Ms,[t[15]||(t[15]=s("thead",{class:"bg-light"},[s("tr",null,[s("th",{class:"ps-3"},"#"),s("th",null,"Fecha"),s("th",null,"Cliente"),s("th",null,"Crédito"),s("th",null,"Cuota"),s("th",null,"Monto"),s("th",null,"Método Pago"),s("th",{class:"text-center pe-3"},"Acciones")])],-1)),s("tbody",null,[(d(!0),n(O,null,U(a.pagos.data,e=>{var f,c,r,u,B,M,T,j,D,I,P,S,z,A;return d(),n("tr",{key:e.id},[s("td",Ts,[s("span",js,l(e.id),1)]),s("td",null,[s("small",Ds,l(q(e.fecha)),1)]),s("td",null,[s("div",Is,l(((u=(r=(c=(f=e.cuota)==null?void 0:f.credito)==null?void 0:c.venta)==null?void 0:r.user)==null?void 0:u.name)||"N/A"),1),s("small",Ps," CI: "+l(((j=(T=(M=(B=e.cuota)==null?void 0:B.credito)==null?void 0:M.venta)==null?void 0:T.user)==null?void 0:j.ci)||"N/A"),1)]),s("td",null,[h(g(v),{href:o.route("creditos.show",(I=(D=e.cuota)==null?void 0:D.credito)==null?void 0:I.id),class:"text-decoration-none"},{default:m(()=>{var L,E;return[s("span",Ss," #"+l((E=(L=e.cuota)==null?void 0:L.credito)==null?void 0:E.id),1)]}),_:2},1032,["href"])]),s("td",null,[s("span",zs,l((P=e.cuota)==null?void 0:P.numero_cuota)+"/"+l((z=(S=e.cuota)==null?void 0:S.credito)==null?void 0:z.cuotas_total),1)]),s("td",null,[s("span",As," Bs. "+l(x(e.monto)),1)]),s("td",null,[s("span",Ls,l(((A=e.metodo_pago)==null?void 0:A.nombre)||"Efectivo"),1)]),s("td",Es,[h(g(v),{href:o.route("pagos.show",e.id),class:"btn btn-sm btn-outline-primary",title:"Ver detalles"},{default:m(()=>[...t[14]||(t[14]=[s("i",{class:"bi bi-eye"},null,-1)])]),_:1},8,["href"])])])}),128))])])]))]),a.pagos.data.length>0?(d(),n("div",Os,[s("div",Us,[s("div",Gs," Mostrando "+l(a.pagos.from)+" a "+l(a.pagos.to)+" de "+l(a.pagos.total)+" pagos ",1),s("nav",null,[s("ul",Hs,[s("li",{class:k(["page-item",{disabled:!a.pagos.prev_page_url}])},[h(g(v),{class:"page-link",href:a.pagos.prev_page_url||"#","preserve-state":""},{default:m(()=>[...t[16]||(t[16]=[_(" Anterior ",-1)])]),_:1},8,["href"])],2),(d(!0),n(O,null,U($.value,e=>(d(),n("li",{key:e,class:k(["page-item",{active:e===a.pagos.current_page}])},[h(g(v),{class:"page-link",href:a.pagos.path+"?page="+e,"preserve-state":""},{default:m(()=>[_(l(e),1)]),_:2},1032,["href"])],2))),128)),s("li",{class:k(["page-item",{disabled:!a.pagos.next_page_url}])},[h(g(v),{class:"page-link",href:a.pagos.next_page_url||"#","preserve-state":""},{default:m(()=>[...t[17]||(t[17]=[_(" Siguiente ",-1)])]),_:1},8,["href"])],2)])])])])):W("",!0)])])]),_:1}))}},Ks=Y(Rs,[["__scopeId","data-v-eebada50"]]);export{Ks as default};
