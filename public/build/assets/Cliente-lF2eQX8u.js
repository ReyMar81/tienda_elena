import{_ as $}from"./AppLayout-ChHXXbMF.js";import{r as p,g as _,b as t,c as i,t as a,f as v,e as m,J as k,K as x,o as n,w as C,F as y,m as f,n as h}from"./app-DTocK5dB.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const w={class:"modal fade show d-block",tabindex:"-1",style:{background:"rgba(0, 0, 0, 0.5)"}},Q={class:"modal-dialog modal-dialog-centered"},R={class:"modal-content"},B={class:"modal-header bg-primary text-white"},M={class:"modal-body text-center"},P={key:0,class:"my-4"},F={class:"border p-3 bg-light"},D=["src"],S={class:"text-muted d-block mt-2"},N={class:"text-muted d-block"},E={key:1,class:"my-4"},V=["disabled"],q={key:0,class:"spinner-border spinner-border-sm me-2"},z={class:"modal-footer"},L={__name:"QRModal",props:{cuota:Object},emits:["close"],setup(u,{emit:b}){const c=u,r=p(null),l=p(!1),g=async()=>{l.value=!0;try{const o=await x.post(route("pagos.generar-qr"),{cuota_id:c.cuota.id,monto:c.cuota.monto_pendiente+(c.cuota.mora||0)});r.value=o.data}catch(o){console.error("Error generando QR:",o)}finally{l.value=!1}},d=o=>parseFloat(o||0).toFixed(2);return(o,s)=>(n(),_(k,{to:"body"},[t("div",w,[t("div",Q,[t("div",R,[t("div",B,[s[2]||(s[2]=t("h5",{class:"modal-title"},"Pago con QR - Próximamente",-1)),t("button",{type:"button",class:"btn-close btn-close-white",onClick:s[0]||(s[0]=e=>o.$emit("close"))})]),t("div",M,[s[5]||(s[5]=t("div",{class:"alert alert-warning"},[t("i",{class:"bi bi-exclamation-triangle-fill"}),t("strong",null,"Funcionalidad Próximamente Disponible"),t("p",{class:"mb-0 mt-2"}," La integración con pasarelas de pago (QR y Pago Fácil) estará disponible próximamente. ")],-1)),r.value?(n(),i("div",P,[s[3]||(s[3]=t("h6",null,"Simulación de QR",-1)),t("div",F,[t("img",{src:r.value.qr_code,alt:"QR Code",class:"img-fluid",style:{"max-width":"200px"}},null,8,D)]),t("small",S,"ID de transacción: "+a(r.value.transaction_id),1),t("small",N,"Monto: Bs. "+a(d(r.value.monto)),1)])):(n(),i("div",E,[t("button",{class:"btn btn-primary",onClick:g,disabled:l.value},[l.value?(n(),i("span",q)):v("",!0),s[4]||(s[4]=m(" Generar QR Simulado ",-1))],8,V)])),s[6]||(s[6]=t("div",{class:"alert alert-info mt-3"},[t("small",null,[t("strong",null,"Nota:"),m(" Este es un QR simulado con fines demostrativos. Para realizar pagos reales, contacte con un vendedor o propietario. ")])],-1))]),t("div",z,[t("button",{type:"button",class:"btn btn-secondary",onClick:s[1]||(s[1]=e=>o.$emit("close"))}," Cerrar ")])])])])]))}},T={class:"container py-4"},j={key:0,class:"text-center text-muted py-5"},A={key:1},G={class:"card-header d-flex justify-content-between align-items-center"},I={class:"mb-0"},J={class:"text-muted"},K={class:"card-body"},O={class:"row mb-3"},H={class:"col-md-4"},U={class:"col-md-4"},W={class:"col-md-4"},X={class:"table-responsive"},Y={class:"table table-sm"},Z=["onClick"],at={__name:"Cliente",props:{creditos:Array},setup(u){const b=p(!1),c=p(null),r=d=>{c.value=d,b.value=!0},l=d=>parseFloat(d||0).toFixed(2),g=d=>new Date(d).toLocaleDateString("es-ES");return(d,o)=>(n(),_($,{title:"Mis Créditos"},{default:C(()=>[t("div",T,[o[7]||(o[7]=t("h2",{class:"mb-4"},"Mis Créditos y Cuotas",-1)),u.creditos.length===0?(n(),i("div",j,[...o[1]||(o[1]=[t("i",{class:"bi bi-credit-card",style:{"font-size":"3rem"}},null,-1),t("p",{class:"mt-3"},"No tienes créditos activos",-1)])])):(n(),i("div",A,[(n(!0),i(y,null,f(u.creditos,s=>(n(),i("div",{key:s.id,class:"card mb-4"},[t("div",G,[t("div",null,[t("h5",I,"Crédito #"+a(s.id),1),t("small",J,a(s.numero_cuotas)+" cuotas",1)]),t("span",{class:h(["badge",{"bg-success":s.estado==="pagado","bg-primary":s.estado==="activo","bg-danger":s.estado==="vencido"}])},a(s.estado),3)]),t("div",K,[t("div",O,[t("div",H,[o[2]||(o[2]=t("strong",null,"Monto Total:",-1)),m(" Bs. "+a(l(s.monto_total)),1)]),t("div",U,[o[3]||(o[3]=t("strong",null,"Pagado:",-1)),m(" Bs. "+a(l(s.monto_pagado)),1)]),t("div",W,[o[4]||(o[4]=t("strong",null,"Saldo:",-1)),m(" Bs. "+a(l(s.monto_pendiente)),1)])]),o[6]||(o[6]=t("h6",{class:"mt-3"},"Cuotas",-1)),t("div",X,[t("table",Y,[o[5]||(o[5]=t("thead",null,[t("tr",null,[t("th",null,"N°"),t("th",null,"Monto"),t("th",null,"Vencimiento"),t("th",null,"Estado"),t("th",null,"Saldo"),t("th",null,"Acción")])],-1)),t("tbody",null,[(n(!0),i(y,null,f(s.cuotas,e=>(n(),i("tr",{key:e.id},[t("td",null,a(e.numero_cuota),1),t("td",null," Bs. "+a(l(e.monto)),1),t("td",null,a(g(e.fecha_vencimiento)),1),t("td",null,[t("span",{class:h(["badge",{"bg-success":e.estado==="pagada","bg-warning":e.estado==="pendiente","bg-danger":e.estado==="vencida"}])},a(e.estado),3)]),t("td",null," Bs. "+a(l(e.monto_pendiente)),1),t("td",null,[e.estado!=="pagada"?(n(),i("button",{key:0,class:"btn btn-sm btn-primary",onClick:tt=>r(e)}," Pagar con QR ",8,Z)):v("",!0)])]))),128))])])])])]))),128))]))]),b.value?(n(),_(L,{key:0,cuota:c.value,onClose:o[0]||(o[0]=s=>b.value=!1)},null,8,["cuota"])):v("",!0)]),_:1}))}};export{at as default};
